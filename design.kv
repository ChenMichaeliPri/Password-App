<LoginScreen>:
    canvas.before:
        Color:
            rgba: (36/255, 117/255, 173/255, 0.8)
        Rectangle:
            pos: self.pos
            size: self.size
    GridLayout:
        cols: 1
        GridLayout:
            cols: 1
            padding: 15, 15
            spacing: 10, 10
            Label:
                text: "Password Manager"
                font_size: '32sp'
                font_name: "Papyrus"
            RelativeLayout:
                TextInput:
                    id: user_id
                    hint_text: "User id"
                    size_hint: 0.7, 0.4
                    pos_hint: {'center_x': 0.5, 'center_y': 0.6}
                    background_color: 1, 1, 1, 0
                    foreground_color: [1, 1, 1, 1]
                    hint_text_color: [1, 1, 1, 1]
                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1
                        Line:
                            points: self.x + 8, self.y, self.x + self.width, self.y
                            width: 1
            RelativeLayout:
                TextInput:
                    id: user_password
                    password: True
                    hint_text: "User Password"
                    size_hint: 0.7, 0.4
                    pos_hint: {'center_x': 0.5, 'center_y': 0.6}
                    background_color: 1, 1, 1, 0
                    foreground_color: [1, 1, 1, 1]
                    hint_text_color: [1, 1, 1, 1]
                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1
                        Line:
                            points: self.x + 8, self.y, self.x + self.width, self.y
                            width: 1
            Label:
                id: login_wrong
                text: ""
            RelativeLayout:
                Button:
                    text: "Login"
                    color: 36/255, 117/255, 173/255, 0.8
                    bold: True
                    size_hint: 0.3, 0.5
                    pos_hint: {'center_x': 0.5, 'center_y': 0.6}
                    on_press: root.login(root.ids.user_id.text, root.ids.user_password.text)
                    opacity: 1 if self.state == 'normal' else 0.5
                    background_normal: ''
                    background_color: 255/255, 215/255, 0, 0.8


        GridLayout:
            cols: 2
            size_hint: 0.2, 0.2
            padding: 10, 10
            spacing: 10, 0
            Button:
                text: "Forgot Password ?"
                background_color: 1, 1, 1, 0
                on_press: root.forgot_password()
                opacity: 1 if self.state == 'normal' else 0.5
                color: 1, 1, 1, 1
            RelativeLayout:
                Button:
                    text: "Sign up"
                    background_color: 1, 1, 1, 0
                    on_press: root.sign_up()
                    opacity: 1 if self.state == 'normal' else 0.5
                    color: 1, 1, 1, 1

<SignUpScreen>:
    canvas.before:
        Color:
            rgba: (36/255, 117/255, 173/255, 0.8)
        Rectangle:
            pos: self.pos
            size: self.size
    GridLayout:
        cols: 1
        padding: 15, 15
        spacing: 10, 10
        RelativeLayout:
            Button:
                text: "Back to Login page"
                background_color: 1, 1, 1, 0
                on_press: root.go_to_login()
                opacity: 1 if self.state == 'normal' else 0.5
                color: 1, 1, 1, 1
                pos_hint: {'center_x': 0.78, 'center_y': 0.7}

        Label:
            text: "Insert your new id below :"
            bold: True
            font_size: '17sp'
        RelativeLayout:
            TextInput:
                id: id
                hint_text: "New id"
                size_hint: 0.7, 0.4
                pos_hint: {'center_x': 0.5, 'center_y': 0.6}
                background_color: 1, 1, 1, 0
                foreground_color: [1, 1, 1, 1]
                hint_text_color: [1, 1, 1, 1]
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    Line:
                        points: self.x + 8, self.y, self.x + self.width, self.y
                        width: 1
        Label:
            text: "Insert your new password below :"
            bold: True
            font_size: '17sp'
        RelativeLayout:
            TextInput:
                id: password
                hint_text: "New password"
                size_hint: 0.7, 0.4
                pos_hint: {'center_x': 0.5, 'center_y': 0.6}
                background_color: 1, 1, 1, 0
                foreground_color: [1, 1, 1, 1]
                hint_text_color: [1, 1, 1, 1]
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    Line:
                        points: self.x + 8, self.y, self.x + self.width, self.y
                        width: 1
        Label:
            id: username_taken
            text: ""
        RelativeLayout:
            Button:
                text: "Submit"
                color: 36/255, 117/255, 173/255, 0.8
                bold: True
                size_hint: 0.3, 0.5
                pos_hint: {'center_x': 0.5, 'center_y': 0.6}
                on_press: root.add_user(root.ids.id.text, root.ids.password.text)
                opacity: 1 if self.state == 'normal' else 0.5
                background_normal: ''
                background_color: 255/255, 215/255, 0, 0.8

<SignUpScreenSuccess>:
    canvas.before:
        Color:
            rgba: (36/255, 117/255, 173/255, 0.8)
        Rectangle:
            pos: self.pos
            size: self.size
    GridLayout:
        cols: 1
        Label:
            text: "Sign up completed\n\n     successfully!"
            bold: True
            font_size: '20sp'
        RelativeLayout:
            Button:
                text: "Login page"
                on_press: root.go_to_login()
                background_size_hint: 0.1, 0.1
                color: 36/255, 117/255, 173/255, 0.8
                bold: True
                size_hint: 0.35, 0.2
                pos_hint: {'center_x': 0.5, 'center_y': 0.4}
                opacity: 1 if self.state == 'normal' else 0.5
                background_normal: ''
                background_color: 255/255, 215/255, 0, 0.8

<ForgotPassword>:
    canvas.before:
        Color:
            rgba: (36/255, 117/255, 173/255, 0.8)
        Rectangle:
            pos: self.pos
            size: self.size
    GridLayout:
        cols: 1
        padding: 15, 15
        spacing: 10, 10
        RelativeLayout:
            Button:
                text: "Back to Login page"
                background_color: 1, 1, 1, 0
                on_press: root.go_to_login()
                opacity: 1 if self.state == 'normal' else 0.5
                color: 1, 1, 1, 1
                pos_hint: {'center_x': 0.78, 'center_y': 0.7}
        Label:
            text: "Restore your password"
            bold: True
            font_size: '20sp'
        RelativeLayout:
            TextInput:
                id: username
                hint_text: "Fill in your user name"
                size_hint: 0.7, 0.55
                pos_hint: {'center_x': 0.5, 'center_y': 0.6}
                background_color: 1, 1, 1, 0
                foreground_color: [1, 1, 1, 1]
                hint_text_color: [1, 1, 1, 1]
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    Line:
                        points: self.x + 8, self.y, self.x + self.width, self.y
                        width: 1
        RelativeLayout:
            Button:
                text: "Generate question"
                on_press: root.generate_question(root.ids.username.text)
                background_size_hint: 0.1, 0.1
                color: 36/255, 117/255, 173/255, 0.8
                bold: True
                size_hint: 0.4, 0.2
                pos_hint: {'center_x': 0.5, 'center_y': 0.4}
                opacity: 1 if self.state == 'normal' else 0.5
                background_normal: ''
                background_color: 255/255, 215/255, 0, 0.8
        Label:
            id: restore_password_question
            text: ""
        RelativeLayout:
            TextInput:
                id: question_answer
                hint_text: "Fill in the password"
                size_hint: 0.7, 0.55
                pos_hint: {'center_x': 0.5, 'center_y': 0.6}
                background_color: 1, 1, 1, 0
                foreground_color: [1, 1, 1, 1]
                hint_text_color: [1, 1, 1, 1]
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    Line:
                        points: self.x + 8, self.y, self.x + self.width, self.y
                        width: 1
        Label:
            id: restored_password
            text: ""
        RelativeLayout:
            Button:
                text: "Answer question"
                on_press: root.answer_question(root.ids.question_answer.text)
                background_size_hint: 0.1, 0.1
                color: 36/255, 117/255, 173/255, 0.8
                bold: True
                size_hint: 0.4, 0.2
                pos_hint: {'center_x': 0.5, 'center_y': 0.4}
                opacity: 1 if self.state == 'normal' else 0.5
                background_normal: ''
                background_color: 255/255, 215/255, 0, 0.8

<LoginScreenSuccess>:
    canvas.before:
        Color:
            rgba: (36/255, 117/255, 173/255, 0.8)
        Rectangle:
            pos: self.pos
            size: self.size
    GridLayout:
        cols: 1
        GridLayout:
            cols: 1
            padding: 15, 15
            spacing: 10, 10
            RelativeLayout:
                Button:
                    text: "Logout"
                    background_color: 1, 1, 1, 0
                    on_press: root.log_out()
                    opacity: 1 if self.state == 'normal' else 0.5
                    color: 1, 1, 1, 1
                    pos_hint: {'center_x': 0.85, 'center_y': 0.6}
            Label:
                text: "Extract required password :"
                bold: True
                font_size: '17sp'
            RelativeLayout:
                TextInput:
                    id: required_password
                    hint_text: "Fill in the required password"
                    size_hint: 0.7, 0.7
                    pos_hint: {'center_x': 0.5, 'center_y': 0.6}
                    background_color: 1, 1, 1, 0
                    foreground_color: [1, 1, 1, 1]
                    hint_text_color: [1, 1, 1, 1]
                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1
                        Line:
                            points: self.x + 8, self.y, self.x + self.width, self.y
                            width: 1
            Label:
                id: required_password_output
                text: ""
            RelativeLayout:
                Button:
                    text: "Show password"
                    color: 36/255, 117/255, 173/255, 0.8
                    bold: True
                    size_hint: 0.3, 0.6
                    pos_hint: {'center_x': 0.5, 'center_y': 0.6}
                    on_press: root.extract_password(root.ids.required_password.text)
                    opacity: 1 if self.state == 'normal' else 0.5
                    background_normal: ''
                    background_color: 255/255, 215/255, 0, 1
        GridLayout:
            cols: 1
            padding: 15, 15
            spacing: 10, 10
            Label:
                text: "Add new password :"
                bold: True
                font_size: '17sp'
            RelativeLayout:
                TextInput:
                    id: new_password_name
                    hint_text: "Fill in the password's purpose / name"
                    size_hint: 0.7, 0.7
                    pos_hint: {'center_x': 0.5, 'center_y': 0.6}
                    background_color: 1, 1, 1, 0
                    foreground_color: [1, 1, 1, 1]
                    hint_text_color: [1, 1, 1, 1]
                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1
                        Line:
                            points: self.x + 8, self.y, self.x + self.width, self.y
                            width: 1
            RelativeLayout:
                TextInput:
                    id: new_password
                    hint_text: "Fill in the password"
                    size_hint: 0.7, 0.7
                    pos_hint: {'center_x': 0.5, 'center_y': 0.6}
                    background_color: 1, 1, 1, 0
                    foreground_color: [1, 1, 1, 1]
                    hint_text_color: [1, 1, 1, 1]
                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1
                        Line:
                            points: self.x + 8, self.y, self.x + self.width, self.y
                            width: 1
            Label:
                id: password_added
                text: ""
            RelativeLayout:
                Button:
                    text: "Submit"
                    color: 36/255, 117/255, 173/255, 0.8
                    bold: True
                    size_hint: 0.3, 0.6
                    pos_hint: {'center_x': 0.5, 'center_y': 0.6}
                    on_press: root.add_password(root.ids.new_password_name.text, root.ids.new_password.text)
                    opacity: 1 if self.state == 'normal' else 0.5
                    background_normal: ''
                    background_color: 255/255, 215/255, 0, 1

<RootWidget>:
    LoginScreen:
        name: "login_screen"
    SignUpScreen:
        name: "sign_up_screen"
    SignUpScreenSuccess:
        name: "sign_up_screen_success"
    ForgotPassword:
        name: "forgot_password"
    LoginScreenSuccess:
        name: "login_screen_success"
